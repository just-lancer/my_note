<mxfile host="Electron" modified="2023-06-04T16:13:58.918Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.2.8 Chrome/112.0.5615.165 Electron/24.2.0 Safari/537.36" etag="w7d28t17bC6dWPTKRzjc" version="21.2.8" type="device" pages="10">
  <diagram id="4ju707lhAvbwy4sFZ2MY" name="Kafka-消峰">
    <mxGraphModel dx="1418" dy="828" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-0" />
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-1" parent="mPwQPQs0xLlVRB0cLg-V-0" />
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-2" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="100" y="190" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-6" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="220" y="270" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-7" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="190" y="250" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-8" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="130" y="210" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-9" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="160" y="230" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-11" value="。。。。。。" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="120" y="360" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-12" value="消息队列" style="shape=dataStorage;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="370" y="230" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mPwQPQs0xLlVRB0cLg-V-13" value="消费者" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="690" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZqbVB366F2JGu85XHtSe-0" value="大量请求产生：10亿次/秒" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;fontSize=14;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="75" y="150" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ZqbVB366F2JGu85XHtSe-1" value="" style="endArrow=classic;html=1;fontSize=14;strokeWidth=2;" parent="mPwQPQs0xLlVRB0cLg-V-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="260" y="260" as="sourcePoint" />
            <mxPoint x="360" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZqbVB366F2JGu85XHtSe-2" value="请求处理速度：1千万次/秒" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;fontSize=14;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="660" y="200" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ZqbVB366F2JGu85XHtSe-3" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=14;" parent="mPwQPQs0xLlVRB0cLg-V-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="690" y="259.5" as="sourcePoint" />
            <mxPoint x="570" y="259.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZqbVB366F2JGu85XHtSe-4" value="推送消息" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="260" y="230" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ZqbVB366F2JGu85XHtSe-5" value="拉取消息" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;" parent="mPwQPQs0xLlVRB0cLg-V-1" vertex="1">
          <mxGeometry x="590" y="230" width="90" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="njnPsborp2bHW_6hOahz" name="kafka-解耦">
    <mxGraphModel dx="1422" dy="822" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-4" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=23;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="100" y="120" width="140" height="300" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-1" value="MySQL" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="110" y="160" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-2" value="Flume" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="110" y="230" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-3" value="Socket" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="110" y="300" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-6" value="。。。。。。" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="120" y="370" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-7" value="消息队列" style="shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;fontSize=14;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="400" y="215" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-8" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=23;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="770" y="90" width="150" height="420" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-9" value="Hadoop" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="780" y="145" width="130" height="55" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-10" value="Spark" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="780" y="225" width="130" height="55" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-11" value="Flink" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="780" y="304" width="130" height="56" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-12" value="。。。。。。" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=none;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="795" y="470" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-14" value="" style="endArrow=classic;html=1;fontSize=23;jumpSize=9;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1" source="-SZoqkhJ9ScYRtCYdYam-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="260" y="180" as="sourcePoint" />
            <mxPoint x="390" y="240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-15" value="" style="endArrow=classic;html=1;fontSize=23;jumpSize=9;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="230" y="254" as="sourcePoint" />
            <mxPoint x="390" y="254" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-16" value="" style="endArrow=classic;html=1;fontSize=23;jumpSize=9;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1" source="-SZoqkhJ9ScYRtCYdYam-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="250" y="330" as="sourcePoint" />
            <mxPoint x="390" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-18" value="" style="endArrow=classic;html=1;fontSize=23;strokeWidth=2;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1" source="-SZoqkhJ9ScYRtCYdYam-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="740" y="112.5" as="sourcePoint" />
            <mxPoint x="620" y="240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-19" value="" style="endArrow=classic;html=1;fontSize=23;strokeWidth=2;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="780" y="253.5" as="sourcePoint" />
            <mxPoint x="620" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-20" value="" style="endArrow=classic;html=1;fontSize=23;strokeWidth=2;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1" source="-SZoqkhJ9ScYRtCYdYam-11">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="745" y="320" as="sourcePoint" />
            <mxPoint x="620" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-21" value="推送消息" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="290" y="310" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-22" value="拉取消息" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="650" y="370" width="60" height="24" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-23" value="Springboot" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="780" y="386" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-24" value="" style="endArrow=classic;html=1;fontSize=23;strokeWidth=2;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" edge="1" target="-SZoqkhJ9ScYRtCYdYam-7" source="-SZoqkhJ9ScYRtCYdYam-23">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="745" y="395" as="sourcePoint" />
            <mxPoint x="625" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-26" value="生产者" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=none;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="100" y="120" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="-SZoqkhJ9ScYRtCYdYam-27" value="消费者" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=none;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="780" y="100" width="90" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="YWLHDJZJAULUEGsvKCDX" name="Kafka-异步">
    <mxGraphModel dx="1086" dy="1975" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="st13JDMbZ6BnU4L5hULn-0" />
        <mxCell id="st13JDMbZ6BnU4L5hULn-1" parent="st13JDMbZ6BnU4L5hULn-0" />
        <mxCell id="c1UNg1jmHl2TOaGY32A--0" value="message queue" style="shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;fontSize=14;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="1000" y="710" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--4" value="① 页面填写注册信息，并请求写入数据库" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fillColor=#d5e8d4;strokeColor=#82b366;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="229.5" y="40" width="341" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--7" value="server1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="560" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--10" value="" style="curved=1;endArrow=classic;html=1;fontSize=23;strokeWidth=2;" parent="st13JDMbZ6BnU4L5hULn-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="110" y="180" as="sourcePoint" />
            <mxPoint x="620" y="190" as="targetPoint" />
            <Array as="points">
              <mxPoint x="300" y="90" />
              <mxPoint x="490" y="100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--14" value="" style="curved=1;endArrow=classic;html=1;fontSize=23;strokeWidth=2;" parent="st13JDMbZ6BnU4L5hULn-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1160" y="280" as="sourcePoint" />
            <mxPoint x="130" y="280" as="targetPoint" />
            <Array as="points">
              <mxPoint x="940" y="400" />
              <mxPoint x="390" y="410" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--16" value="② 服务端接收请求，处理请求，调用发送短信服务" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fillColor=#d5e8d4;strokeColor=#82b366;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="740" y="40" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--17" value="以注册用户，并发送短信通知为例，说明，消息同步和异步" style="rounded=0;fontSize=16;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="40" y="-90" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--31" value="同步消息" style="rounded=0;fontSize=16;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="40" y="-10" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--32" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fontSize=23;fillColor=#FFFFFF;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="70" y="190" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--41" value="" style="curved=1;endArrow=classic;html=1;fontSize=23;strokeWidth=2;" parent="st13JDMbZ6BnU4L5hULn-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="650" y="180" as="sourcePoint" />
            <mxPoint x="1160" y="190" as="targetPoint" />
            <Array as="points">
              <mxPoint x="840" y="90" />
              <mxPoint x="1030" y="100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--42" value="server2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="1100" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--43" value="① 页面响应注册成功" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fillColor=#d5e8d4;strokeColor=#82b366;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="486" y="420" width="341" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--44" value="① 页面填写注册信息，并请求写入数据库" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fillColor=#d5e8d4;strokeColor=#82b366;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="289.5" y="560" width="341" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--45" value="server1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="620" y="720" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--46" value="" style="curved=1;endArrow=classic;html=1;fontSize=23;strokeWidth=2;" parent="st13JDMbZ6BnU4L5hULn-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="700" as="sourcePoint" />
            <mxPoint x="680" y="710" as="targetPoint" />
            <Array as="points">
              <mxPoint x="360" y="610" />
              <mxPoint x="550" y="620" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--47" value="" style="curved=1;endArrow=classic;html=1;fontSize=23;strokeWidth=2;" parent="st13JDMbZ6BnU4L5hULn-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="680" y="800" as="sourcePoint" />
            <mxPoint x="190" y="800" as="targetPoint" />
            <Array as="points">
              <mxPoint x="410" y="960" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--48" value="② 服务端接收请求，处理请求，调用发送短信服务" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fillColor=#d5e8d4;strokeColor=#82b366;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="730" y="650" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--49" value="异步消息" style="rounded=0;whiteSpace=wrap;fontSize=16;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="40" y="520" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--50" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fontSize=23;fillColor=#FFFFFF;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="130" y="710" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--52" value="server2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="1430" y="720" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--54" value="② 页面响应注册成功" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fillColor=#d5e8d4;strokeColor=#82b366;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="270" y="900" width="341" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--55" value="" style="endArrow=classic;html=1;fontSize=17;strokeWidth=2;" parent="st13JDMbZ6BnU4L5hULn-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="760" y="750" as="sourcePoint" />
            <mxPoint x="970" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--56" value="拉取消息" style="rounded=0;whiteSpace=wrap;fontSize=16;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="1280" y="770" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--58" value="" style="endArrow=classic;html=1;fontSize=17;strokeWidth=2;" parent="st13JDMbZ6BnU4L5hULn-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1410" y="750" as="sourcePoint" />
            <mxPoint x="1220" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="c1UNg1jmHl2TOaGY32A--59" value="推送消息" style="rounded=0;whiteSpace=wrap;fontSize=16;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="st13JDMbZ6BnU4L5hULn-1" vertex="1">
          <mxGeometry x="810" y="770" width="110" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="rfrcg1DxgMcE9HgeybYD" name="kafka-基本架构">
    <mxGraphModel dx="1086" dy="1975" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-0" />
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-1" parent="nplIlUuMpHp5ZsqfAFA7-0" />
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-2" value="&amp;nbsp;/Kafka/brokers/ids ：该zookeeper节点记录了当前Kafka集群中有哪些broker节点。例如，/Kafka/brokers/ids [0, 1, 2]，表示当前集群有0，1，2三个broker&lt;br style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp;/Kafka/brokers/topics ：该节点记录了当前主题的各个分区以及分区副本的ISR，例如，/Kafka/broker/topics/[topic name]/partitions/[partitionID]/state {&quot;leader&quot; : 1, &quot;isr&quot; : [1, 0, 2]}&lt;br style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;表示当前主题下，指定分区的副本（ISR）有1，0，2，其中1号broker节点上的副本为leader副本&lt;br style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp;/Kafka/controller ：该节点记录了中央控制器（center controller）所在的broker节点，例如，/Kafka/controller {&quot;broker&quot; : 1}，表示当前集群的中央控制器在1号broker节点上&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt; &lt;/span&gt;中央控制器用于控制消费者组的消费策略" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;align=left;verticalAlign=bottom;strokeColor=#666666;fontColor=#333333;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="29" width="1101" height="140" as="geometry" />
        </mxCell>
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-3" value="zookeeper：Kafka在zookeeper中维护的信息有很多，重要的有三个：" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;align=left;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="30" width="530" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-4" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;fillColor=#FFFFFF;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="30" y="200" width="160" height="550" as="geometry" />
        </mxCell>
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-5" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;fillColor=#FFFFFF;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="290" y="200" width="540" height="550" as="geometry" />
        </mxCell>
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-6" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;fillColor=#FFFFFF;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="930" y="200" width="220" height="550" as="geometry" />
        </mxCell>
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-7" value="producer" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="30" y="200" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-8" value="broker" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="290" y="200" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nplIlUuMpHp5ZsqfAFA7-9" value="consumer" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="930" y="200" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-0" value="数据100T" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="50" y="430" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-4" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="950" y="260" width="180" height="210" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-5" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="950" y="510" width="180" height="210" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-13" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="320" y="260" width="470" height="120" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-14" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="320" y="420" width="470" height="120" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-15" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="320" y="590" width="470" height="120" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-16" value="broker_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="320" y="260" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-17" value="broker_1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="320" y="420" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-19" value="broker_2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="320" y="590" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-20" value="主题A - 第0分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="344" y="330" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-21" value="主题A - 第2分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="640" y="330" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-22" value="主题A - 第1分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="344" y="490" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-23" value="主题A - 第2分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="345" y="660" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-24" value="主题A - 第0分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="640" y="490" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-25" value="主题A - 第1分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="640" y="660" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-27" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="430" y="300" width="55" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-28" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="430" y="460" width="54" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-29" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="430" y="630" width="55" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-31" value="follower" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="720" y="300" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-32" value="follower" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="710" y="460" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-34" value="follower" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="720" y="630" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-35" value="consumer group 0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="950" y="260" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-36" value="consumer group 1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="950" y="510" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-37" value="consumer_0" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="960" y="300" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-38" value="consumer_1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="960" y="360" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-39" value="consumer_2" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="960" y="415" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-40" value="consumer_0" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="960" y="555" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-41" value="consumer_1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="960" y="615" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-42" value="consumer_2" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="960" y="670" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-43" value="三台Kafka节点，一个主题，每个主题两个分区，两个消费者组，每个消费者组三个消费者，为例，说明Kafka的整体架构" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="29" y="-70" width="761" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-45" value="producer" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="50" y="490" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-47" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" parent="nplIlUuMpHp5ZsqfAFA7-1" source="vmqPkdr9hsR5BwTOfRYn-45" target="vmqPkdr9hsR5BwTOfRYn-20" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="210" y="490" as="sourcePoint" />
            <mxPoint x="260" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-48" value="" style="endArrow=classic;html=1;rounded=0;entryX=-0.043;entryY=0.475;entryDx=0;entryDy=0;strokeWidth=2;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="nplIlUuMpHp5ZsqfAFA7-1" source="vmqPkdr9hsR5BwTOfRYn-45" target="vmqPkdr9hsR5BwTOfRYn-22" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="210" y="510" as="sourcePoint" />
            <mxPoint x="345" y="365" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-49" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" parent="nplIlUuMpHp5ZsqfAFA7-1" source="vmqPkdr9hsR5BwTOfRYn-45" target="vmqPkdr9hsR5BwTOfRYn-23" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="210" y="531" as="sourcePoint" />
            <mxPoint x="338" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-52" value="推送消息" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;strokeColor=none;fillColor=#f5f5f5;fontColor=#333333;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="201" y="475" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-53" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;dashPattern=8 8;fillColor=#d5e8d4;strokeColor=#82b366;" parent="nplIlUuMpHp5ZsqfAFA7-1" target="vmqPkdr9hsR5BwTOfRYn-24" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="484" y="350" as="sourcePoint" />
            <mxPoint x="534" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-54" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;dashed=1;dashPattern=8 8;fillColor=#dae8fc;strokeColor=#6c8ebf;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="nplIlUuMpHp5ZsqfAFA7-1" target="vmqPkdr9hsR5BwTOfRYn-25" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="485" y="510" as="sourcePoint" />
            <mxPoint x="641" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-55" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;dashed=1;dashPattern=8 8;fillColor=#ffe6cc;strokeColor=#d79b00;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="nplIlUuMpHp5ZsqfAFA7-1" target="vmqPkdr9hsR5BwTOfRYn-21" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="485" y="680" as="sourcePoint" />
            <mxPoint x="640" y="850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-56" value="leader与follower之间数据同步" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;strokeColor=none;fillColor=#f5f5f5;fontColor=#333333;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="570" y="550" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-58" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;entryX=0.957;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;fillColor=#d5e8d4;strokeColor=#82b366;" parent="nplIlUuMpHp5ZsqfAFA7-1" source="vmqPkdr9hsR5BwTOfRYn-37" target="vmqPkdr9hsR5BwTOfRYn-20" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="890" y="340" as="sourcePoint" />
            <mxPoint x="850" y="280" as="targetPoint" />
            <Array as="points">
              <mxPoint x="890" y="320" />
              <mxPoint x="890" y="230" />
              <mxPoint x="570" y="230" />
              <mxPoint x="570" y="350" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-59" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;entryX=0.957;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="nplIlUuMpHp5ZsqfAFA7-1" source="vmqPkdr9hsR5BwTOfRYn-38" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="966" y="480" as="sourcePoint" />
            <mxPoint x="484" y="510" as="targetPoint" />
            <Array as="points">
              <mxPoint x="880" y="380" />
              <mxPoint x="880" y="400" />
              <mxPoint x="576" y="400" />
              <mxPoint x="576" y="510" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-60" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;entryX=0.957;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="nplIlUuMpHp5ZsqfAFA7-1" source="vmqPkdr9hsR5BwTOfRYn-39" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="966" y="650" as="sourcePoint" />
            <mxPoint x="484" y="680" as="targetPoint" />
            <Array as="points">
              <mxPoint x="896" y="435" />
              <mxPoint x="896" y="780" />
              <mxPoint x="576" y="780" />
              <mxPoint x="576" y="680" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-61" value="拉取消息" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;strokeColor=none;fillColor=#f5f5f5;fontColor=#333333;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="850" y="335" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-62" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;" parent="nplIlUuMpHp5ZsqfAFA7-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="540" y="200" as="sourcePoint" />
            <mxPoint x="540" y="143" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vmqPkdr9hsR5BwTOfRYn-63" value="注册信息" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="nplIlUuMpHp5ZsqfAFA7-1" vertex="1">
          <mxGeometry x="559" y="160" width="80" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="m-WgLniff2sZ9j8zBzja" name="Kafka - 生产者消息发送原理及流程">
    <mxGraphModel dx="1086" dy="773" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-1" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="30" y="250" width="1460" height="710" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-3" value="producer" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="30" y="250" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-33" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="310" width="720" height="620" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-34" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="827" y="570" width="643" height="360" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-35" value="main线程" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="60" y="310" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-36" value="sender线程" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="827" y="570" width="83" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-37" value="拦截器" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="335.5" y="430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-38" value="序列化器" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="522" y="430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-39" value="分区器" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="110" y="685" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-40" value="调用send()方法开始发送消息" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="70" y="440" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-41" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="7Etl2_FkEKs0yxj5ysGA-40" target="7Etl2_FkEKs0yxj5ysGA-37" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="169.5" y="410" as="sourcePoint" />
            <mxPoint x="169.5" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-43" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;edgeStyle=orthogonalEdgeStyle;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="7Etl2_FkEKs0yxj5ysGA-38" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="169.5" y="637" as="sourcePoint" />
            <mxPoint x="170" y="685" as="targetPoint" />
            <Array as="points">
              <mxPoint x="652" y="460" />
              <mxPoint x="652" y="520" />
              <mxPoint x="171" y="520" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-47" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="276" y="550" width="350" height="360" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-48" value="" style="shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="286" y="620" width="332" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-49" value="" style="shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="296" y="720" width="316" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-50" value="" style="shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="296" y="820" width="316" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-51" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" parent="1" vertex="1">
          <mxGeometry x="230" y="566.25" width="40" height="297.5" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-52" value="RecoderAccumulator" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="315.5" y="550" width="144.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-54" value="d1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="562" y="627.5" width="26" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-55" value="d2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="522" y="627.5" width="26" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-57" value="d3" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="479" y="627.5" width="26" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-58" value="。。。" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="439" y="627.5" width="33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-65" value="d1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="559" y="727.5" width="26" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-66" value="d2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="519" y="727.5" width="26" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-68" value="。。。" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="475.5" y="727.5" width="33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-69" value="d1" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="562" y="827.5" width="26" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-70" value="d2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="522" y="827.5" width="26" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-71" value="d3" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="479" y="827.5" width="26" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-73" value="d4" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="442.5" y="827.5" width="26" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-74" value="。。。" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="403" y="827.5" width="33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-76" value="RecoderAccumulator：消息累加器，用于缓存main线程处理好的数据&lt;br style=&quot;font-size: 14px;&quot;&gt;RecoderAccumulator是内存中的一块区域，默认大小为32M&lt;br style=&quot;font-size: 14px;&quot;&gt;RecoderAccumulator内部为每个分区都维护了一个双端队列，队列存放需要发送的数据&lt;br style=&quot;font-size: 14px;&quot;&gt;每个队列中的数据都以批（producerBatch）的形式发送，每个producerBath大小为16K" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacingLeft=14;spacingTop=3;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="169" y="320" width="571" height="90" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-77" value="partition_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="324.5" y="620" width="71" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-78" value="partition_1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="327.5" y="720" width="75.5" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-79" value="partition_2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="315" y="820" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-80" value="producerBatch" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="651" y="715" width="109" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-82" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" target="7Etl2_FkEKs0yxj5ysGA-54" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="650" y="727.5" as="sourcePoint" />
            <mxPoint x="700" y="677.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-84" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="650" y="730" as="sourcePoint" />
            <mxPoint x="585" y="746.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-85" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="7Etl2_FkEKs0yxj5ysGA-80" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="650" y="740" as="sourcePoint" />
            <mxPoint x="588" y="849.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-86" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="459" y="459.5" as="sourcePoint" />
            <mxPoint x="525" y="459.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-87" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="838.5" y="650" width="260" height="210" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-88" value="network client将拉取的数据封装成带有分区信息的、具有网络传输条件的数据" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="845" y="603" width="265" height="45" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-89" value="partition_0_d1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;gradientColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="1003.5" y="675" width="86" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-91" value="partition_0_d2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="913.5" y="675" width="86" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-92" value="。。。" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="873.5" y="675" width="33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-93" value="partition_1_d1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1007.5" y="740" width="86" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-94" value="partition_1_d2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="917.5" y="740" width="86" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-95" value="。。。" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="877.5" y="740" width="33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-96" value="partition_ _d1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1003.5" y="800" width="86" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-97" value="partition_2_d2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="913.5" y="800" width="86" height="35" as="geometry" />
        </mxCell>
        <mxCell id="7Etl2_FkEKs0yxj5ysGA-98" value="。。。" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="873.5" y="800" width="33" height="35" as="geometry" />
        </mxCell>
        <mxCell id="NCtZU5JMZegX5DElwOgi-10" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1630" y="330" width="550" height="630" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-1" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1670" y="370" width="470" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-2" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1670" y="530" width="470" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-3" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1670" y="700" width="470" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-4" value="broker_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1670" y="370" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-5" value="broker_1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1670" y="530" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-6" value="broker_2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1670" y="700" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-7" value="主题A - 第0分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="1694" y="440" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-8" value="主题A - 第2分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="1990" y="440" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-9" value="主题A - 第1分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="1694" y="600" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-10" value="主题A - 第2分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="1695" y="770" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-11" value="主题A - 第0分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="1990" y="600" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-12" value="主题A - 第1分区" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="1990" y="770" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-13" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1780" y="410" width="55" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-14" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1780" y="570" width="54" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-15" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1780" y="740" width="55" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-16" value="follower" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="2070" y="410" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-17" value="follower" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="2060" y="570" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-18" value="follower" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="2070" y="740" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-19" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;dashPattern=8 8;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" target="hApPNbmeqp3draOJNJZe-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1834" y="460" as="sourcePoint" />
            <mxPoint x="1884" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-20" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;dashed=1;dashPattern=8 8;fillColor=#dae8fc;strokeColor=#6c8ebf;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="hApPNbmeqp3draOJNJZe-12" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1835" y="620" as="sourcePoint" />
            <mxPoint x="1991" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-21" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=2;dashed=1;dashPattern=8 8;fillColor=#ffe6cc;strokeColor=#d79b00;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="hApPNbmeqp3draOJNJZe-8" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1835" y="790" as="sourcePoint" />
            <mxPoint x="1990" y="960" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-22" value="leader与follower之间数据同步" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;strokeColor=none;fillColor=#f5f5f5;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="1920" y="657.5" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-23" value="selector：用于建立网络连接，并发送数据" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="1250" y="740" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-24" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="8mVvHncgK4D11r-55cyk-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="612" y="645" as="sourcePoint" />
            <mxPoint x="840" y="1236" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-25" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="8mVvHncgK4D11r-55cyk-2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="612" y="745" as="sourcePoint" />
            <mxPoint x="690" y="1100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-26" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=14;fillColor=#ffe6cc;strokeColor=#d79b00;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="8mVvHncgK4D11r-55cyk-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="612" y="847.5" as="sourcePoint" />
            <mxPoint x="540" y="1100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-27" value="条件到达时，sender线程读取数据" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="640" y="585" width="140" height="42.5" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-28" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=14;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="hApPNbmeqp3draOJNJZe-23" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1110" y="760" as="sourcePoint" />
            <mxPoint x="1160" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-29" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=14;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" target="hApPNbmeqp3draOJNJZe-7" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1410" y="759.5" as="sourcePoint" />
            <mxPoint x="1480" y="759.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-30" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=14;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" target="hApPNbmeqp3draOJNJZe-9" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1410" y="758.75" as="sourcePoint" />
            <mxPoint x="1664" y="672" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-31" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=14;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" target="hApPNbmeqp3draOJNJZe-10" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1410" y="758.38" as="sourcePoint" />
            <mxPoint x="1750" y="851.63" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-32" value="broker" style="rounded=0;whiteSpace=wrap;html=1;fontSize=17;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1630" y="330" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hApPNbmeqp3draOJNJZe-33" value="ack应答：分区副本leader接收生产者消息后，需要向selector进行ack应答：&lt;br&gt;0：生产者发送的消息，不需要等待数据落盘应答&lt;br&gt;1：生产者发送的消息，需要leader接收、落盘后应答&lt;br&gt;-1（all）：生产者发送的消息，需要leader和ISR队列里所有follower落盘后应答" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;align=left;spacingLeft=6;spacing=5;labelBackgroundColor=none;labelBorderColor=none;spacingTop=0;gradientColor=none;perimeterSpacing=0;" parent="1" vertex="1">
          <mxGeometry x="1654" y="840" width="505" height="100" as="geometry" />
        </mxCell>
        <mxCell id="2ASMHXHlYmNAma6pXWf4-1" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=14;edgeStyle=orthogonalEdgeStyle;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" target="hApPNbmeqp3draOJNJZe-23" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1910" y="940" as="sourcePoint" />
            <mxPoint x="1910" y="1050" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1910" y="990" />
              <mxPoint x="1330" y="990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="2ASMHXHlYmNAma6pXWf4-2" value="ack应答" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1530" y="960" width="65" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2ASMHXHlYmNAma6pXWf4-3" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=2;fontSize=14;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1319.5" y="740" as="sourcePoint" />
            <mxPoint x="1320" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2ASMHXHlYmNAma6pXWf4-4" value="是否成功发送？" style="rhombus;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=none;gradientColor=#ffffff;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="1250" y="655" width="140" height="55" as="geometry" />
        </mxCell>
        <mxCell id="2ASMHXHlYmNAma6pXWf4-5" value="" style="endArrow=classic;html=1;strokeColor=#6c8ebf;strokeWidth=2;fontSize=14;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fillColor=#dae8fc;" parent="1" target="8mVvHncgK4D11r-55cyk-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1240" y="683" as="sourcePoint" />
            <mxPoint x="1190" y="682" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2ASMHXHlYmNAma6pXWf4-6" value="是：消息将被清除" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1126.5" y="648" width="114" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2ASMHXHlYmNAma6pXWf4-7" value="" style="endArrow=classic;html=1;strokeColor=#6c8ebf;strokeWidth=2;fontSize=14;fillColor=#dae8fc;entryX=0.944;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="hApPNbmeqp3draOJNJZe-23" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1330" y="653" as="sourcePoint" />
            <mxPoint x="1540" y="530" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1401" y="653" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="2ASMHXHlYmNAma6pXWf4-8" value="否：重试，重新发送信息&lt;br&gt;次数为int类型的最大值" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1270" y="600" width="174" height="45" as="geometry" />
        </mxCell>
        <mxCell id="8mVvHncgK4D11r-55cyk-1" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#FF6666;strokeWidth=2;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="860" y="670" width="234" height="45" as="geometry" />
        </mxCell>
        <mxCell id="8mVvHncgK4D11r-55cyk-2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#FF6666;strokeWidth=2;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="861.5" y="732.5" width="234" height="45" as="geometry" />
        </mxCell>
        <mxCell id="8mVvHncgK4D11r-55cyk-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#FF6666;strokeWidth=2;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="859.5" y="795" width="234" height="45" as="geometry" />
        </mxCell>
        <mxCell id="8mVvHncgK4D11r-55cyk-4" value="partition_0_d1将被清除" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1108.5" y="697.5" width="161.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8mVvHncgK4D11r-55cyk-5" value="&lt;span style=&quot;font-family: &amp;quot;lucida console&amp;quot;, consolas, courier, monospace; font-size: 14px; text-align: left; background-color: rgb(243, 244, 244);&quot;&gt;InFlightRequests：是个容器，用于缓存已发送出去但还没有收到服务端相应的请求&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="838.5" y="890" width="571.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8mVvHncgK4D11r-55cyk-6" value="" style="endArrow=classic;html=1;entryX=0.079;entryY=0.978;entryDx=0;entryDy=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;strokeColor=#FF6666;strokeWidth=2;entryPerimeter=0;" parent="1" source="8mVvHncgK4D11r-55cyk-5" target="8mVvHncgK4D11r-55cyk-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1290" y="460" as="sourcePoint" />
            <mxPoint x="1340" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="wVZM383lC35fIzjshDI1" name="Kafka-事务">
    <mxGraphModel dx="1422" dy="822" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="Z6YIBSgOSJ7SftdDMf4i-0" />
        <mxCell id="Z6YIBSgOSJ7SftdDMf4i-1" parent="Z6YIBSgOSJ7SftdDMf4i-0" />
        <mxCell id="ROyo3l0hQoxgwDdAbkbh-0" value="Producer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="75" y="200" width="120" height="510" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-0" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="360" y="200" width="750" height="510" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-2" value="Kafka Cluster" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;fontSize=14;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="360" y="200" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-7" value="Kafka系统主题：_transaction_state：用于存储Kafka事务的状态信息，包括事务的ID、状态和参与者等&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;verticalAlign=middle;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="470" y="210" width="640" height="50" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-25" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="380" y="310" width="220" height="380" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-26" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="630" y="310" width="220" height="380" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-27" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="870" y="310" width="220" height="380" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-28" value="Transaction Coordinator&lt;br&gt;事务协调器" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="400" y="340" width="190" height="190" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-29" value="topic_A_partition_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="400" y="590" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-34" value="Transaction Coordinator&lt;br&gt;事务协调器" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="645" y="340" width="190" height="190" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-35" value="topic_A_partition_1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="645" y="590" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-36" value="Transaction Coordinator&lt;br&gt;事务协调器" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="890" y="340" width="190" height="190" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-37" value="topic_A_partition_2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="890" y="590" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-24" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=14;entryX=0;entryY=0.25;entryDx=0;entryDy=0;exitX=0.992;exitY=0.365;exitDx=0;exitDy=0;exitPerimeter=0;" parent="Z6YIBSgOSJ7SftdDMf4i-1" source="ROyo3l0hQoxgwDdAbkbh-0" target="xtHWuVBtn028578zRIDq-28" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="221" y="388" as="sourcePoint" />
            <mxPoint x="300" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-38" value="① 请求Producer ID" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="220" y="356" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-40" value="② 返回Producer ID" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="220" y="400" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-41" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=14;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1.017;entryY=0.459;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Z6YIBSgOSJ7SftdDMf4i-1" source="xtHWuVBtn028578zRIDq-28" target="ROyo3l0hQoxgwDdAbkbh-0" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="290" y="510" as="sourcePoint" />
            <mxPoint x="340" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-42" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=14;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.833;exitDx=0;exitDy=0;exitPerimeter=0;" parent="Z6YIBSgOSJ7SftdDMf4i-1" source="ROyo3l0hQoxgwDdAbkbh-0" target="xtHWuVBtn028578zRIDq-29" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="240" y="635" as="sourcePoint" />
            <mxPoint x="290" y="585" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-43" value="③ 发送消息到topic_A" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="205" y="590" width="145" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-44" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=14;entryX=0;entryY=0.75;entryDx=0;entryDy=0;exitX=1.008;exitY=0.555;exitDx=0;exitDy=0;exitPerimeter=0;" parent="Z6YIBSgOSJ7SftdDMf4i-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="195.96000000000004" y="479.04999999999995" as="sourcePoint" />
            <mxPoint x="400" y="478.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-45" value="④ 发送commit请求" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="205" y="446" width="145" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-46" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=14;entryX=0.045;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Z6YIBSgOSJ7SftdDMf4i-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="506" y="340" as="sourcePoint" />
            <mxPoint x="504.79999999999995" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-47" value="⑤ 持久化commit请求" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="362" y="272" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-48" value="⑥ 返回信息：成功" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="211.5" y="488" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-49" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=14;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.639;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Z6YIBSgOSJ7SftdDMf4i-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="406.96" y="523" as="sourcePoint" />
            <mxPoint x="194" y="523.8899999999999" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-51" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=14;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="Z6YIBSgOSJ7SftdDMf4i-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="434" y="530" as="sourcePoint" />
            <mxPoint x="433.5" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-52" value="⑦ 发送确认请求" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="300" y="550" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-53" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=14;entryX=0.584;entryY=0.995;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Z6YIBSgOSJ7SftdDMf4i-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="464" y="590" as="sourcePoint" />
            <mxPoint x="464.96000000000004" y="529.05" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-54" value="⑧ 返回信息：成功" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="470" y="550" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-55" value="" style="endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=14;entryX=0.045;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Z6YIBSgOSJ7SftdDMf4i-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="548" y="341" as="sourcePoint" />
            <mxPoint x="546.8" y="261" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-56" value="⑨ _transaction_state主题持久化事务成功信息" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="550" y="273" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="xtHWuVBtn028578zRIDq-57" value="broker_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;fillColor=#f5f5f5;fontColor=#333333;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="380" y="310" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="N8qHLhlsr39DczKYm8Sx-0" value="broker_1&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22broker_0%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfontSize%3D14%3Balign%3Dcenter%3BstrokeColor%3Dnone%3BfillColor%3D%23f5f5f5%3BfontColor%3D%23333333%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%22380%22%20y%3D%22310%22%20width%3D%2270%22%20height%3D%2220%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22broker_0%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfontSize%3D14%3Balign%3Dcenter%3BstrokeColor%3Dnone%3BfillColor%3D%23f5f5f5%3BfontColor%3D%23333333%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%22380%22%20y%3D%22310%22%20width%3D%2270%22%20height%3D%2220%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;fillColor=#f5f5f5;fontColor=#333333;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="630" y="310" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="N8qHLhlsr39DczKYm8Sx-1" value="broker_2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;align=center;strokeColor=none;fillColor=#f5f5f5;fontColor=#333333;" parent="Z6YIBSgOSJ7SftdDMf4i-1" vertex="1">
          <mxGeometry x="870" y="310" width="70" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Q8tgwstx5MBmV8pJ3OQl" name="Kafka-broker启动流程">
    <mxGraphModel dx="1422" dy="1991" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-0" />
        <mxCell id="s1NAv4hvSDeUvYOupOQr-1" parent="s1NAv4hvSDeUvYOupOQr-0" />
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-21" value="⑤ center controller在zookeeper中注册分区副本leader的信息" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#FFB366;strokeColor=none;fontColor=#333333;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="410" y="280" width="380" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-13" value="② center controller向zookeeper进行注册，先注册的controller成为leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=none;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="450" y="180" width="270" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-9" value="① broker启动之后，向zookeeper进行注册" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=none;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="70" y="340" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="110" y="30" width="1180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="110" y="380" width="1180" height="190" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-4" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="130" y="410" width="340" height="120" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-8" value="topic_A_partition_0" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="140" y="450" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-9" value="center_controller" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#FFB366;strokeColor=#d79b00;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="340" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-10" value="broker_0" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="130" y="410" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-15" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="530" y="410" width="340" height="120" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-16" value="topic_A_partition_1" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="540" y="450" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-17" value="center_controller" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="740" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-18" value="broker_1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="530" y="410" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-19" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="930" y="410" width="340" height="120" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-20" value="topic_A_partition_2" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=#82b366;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="940" y="450" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-21" value="center_controller" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="1140" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="s1NAv4hvSDeUvYOupOQr-22" value="broker_2" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="930" y="410" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-2" value="zookeeper" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="124" y="31" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-3" value="/Kafka/brokers/ids&lt;br&gt;[0, 1, 2]" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="130" y="70" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-4" value="/Kafka/broker/topics/[topic name]/partitions/[partitionID]/state {&quot;leader&quot; : 1, &quot;isr&quot; : [1, 0, 2]}" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="780" y="70" width="490" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-5" value="/Kafka/controller&lt;br&gt;{&quot;broker&quot; : 1}" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="460" y="70" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-6" value="" style="endArrow=classic;html=1;fontSize=16;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;" parent="s1NAv4hvSDeUvYOupOQr-1" source="s1NAv4hvSDeUvYOupOQr-4" target="0RprUW0VdY4Hi-o-dzBr-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="620" y="250" as="sourcePoint" />
            <mxPoint x="670" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-7" value="" style="endArrow=classic;html=1;fontSize=16;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;" parent="s1NAv4hvSDeUvYOupOQr-1" source="s1NAv4hvSDeUvYOupOQr-15" target="0RprUW0VdY4Hi-o-dzBr-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="620" y="250" as="sourcePoint" />
            <mxPoint x="670" y="200" as="targetPoint" />
            <Array as="points">
              <mxPoint x="700" y="320" />
              <mxPoint x="215" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-8" value="" style="endArrow=classic;html=1;fontSize=16;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;" parent="s1NAv4hvSDeUvYOupOQr-1" source="s1NAv4hvSDeUvYOupOQr-19" target="0RprUW0VdY4Hi-o-dzBr-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="620" y="250" as="sourcePoint" />
            <mxPoint x="670" y="200" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1100" y="320" />
              <mxPoint x="215" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-10" value="" style="endArrow=classic;html=1;fontSize=14;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;" parent="s1NAv4hvSDeUvYOupOQr-1" source="s1NAv4hvSDeUvYOupOQr-9" target="0RprUW0VdY4Hi-o-dzBr-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="240" as="sourcePoint" />
            <mxPoint x="520" y="190" as="targetPoint" />
            <Array as="points">
              <mxPoint x="400" y="170" />
              <mxPoint x="545" y="170" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-11" value="" style="endArrow=classic;html=1;fontSize=14;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;" parent="s1NAv4hvSDeUvYOupOQr-1" source="s1NAv4hvSDeUvYOupOQr-17" target="0RprUW0VdY4Hi-o-dzBr-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="360" as="sourcePoint" />
            <mxPoint x="555" y="140" as="targetPoint" />
            <Array as="points">
              <mxPoint x="800" y="170" />
              <mxPoint x="545" y="170" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-12" value="" style="endArrow=classic;html=1;fontSize=14;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;entryX=0.5;entryY=1;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;" parent="s1NAv4hvSDeUvYOupOQr-1" source="s1NAv4hvSDeUvYOupOQr-21" target="0RprUW0VdY4Hi-o-dzBr-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="370" as="sourcePoint" />
            <mxPoint x="640" y="230" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1200" y="170" />
              <mxPoint x="545" y="170" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-15" value="" style="endArrow=classic;html=1;fontSize=14;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fillColor=#ffe6cc;strokeColor=#FF8000;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;" parent="s1NAv4hvSDeUvYOupOQr-1" target="0RprUW0VdY4Hi-o-dzBr-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="450" as="sourcePoint" />
            <mxPoint x="390" y="400" as="targetPoint" />
            <Array as="points">
              <mxPoint x="350" y="10" />
              <mxPoint x="215" y="10" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-16" value="③ leader controller监听所有broker节点的变化" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=none;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="180" y="-30" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-18" value="④ center controller进行分区副本leader的选举&lt;br&gt;选举规则：&lt;br&gt;1、必须在ISR列表中（即必须是存活状态）&lt;br&gt;2、在AR列表中，顺序最靠前的副本" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#FFB366;strokeColor=none;align=left;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="340" y="540" width="295" height="70" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-19" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontSize=14;strokeColor=none;fontColor=#FF3333;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="630" y="430" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-20" value="" style="endArrow=classic;html=1;strokeColor=#FF8000;strokeWidth=2;fontSize=14;fontColor=#FF3333;exitX=0.75;exitY=0;exitDx=0;exitDy=0;fillColor=#008a00;edgeStyle=orthogonalEdgeStyle;" parent="s1NAv4hvSDeUvYOupOQr-1" source="s1NAv4hvSDeUvYOupOQr-9" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="620" y="350" as="sourcePoint" />
            <mxPoint x="840" y="130" as="targetPoint" />
            <Array as="points">
              <mxPoint x="430" y="260" />
              <mxPoint x="840" y="260" />
              <mxPoint x="840" y="130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-22" value="" style="endArrow=classic;html=1;strokeColor=#b85450;strokeWidth=2;fontSize=14;fontColor=#FF3333;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;fillColor=#f8cecc;" parent="s1NAv4hvSDeUvYOupOQr-1" source="0RprUW0VdY4Hi-o-dzBr-4" target="s1NAv4hvSDeUvYOupOQr-17" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="827" y="450" as="sourcePoint" />
            <mxPoint x="910" y="230" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1330" y="100" />
              <mxPoint x="1330" y="600" />
              <mxPoint x="800" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-23" value="" style="endArrow=classic;html=1;strokeColor=#b85450;strokeWidth=2;fontSize=14;fontColor=#FF3333;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;fillColor=#f8cecc;" parent="s1NAv4hvSDeUvYOupOQr-1" source="0RprUW0VdY4Hi-o-dzBr-4" target="s1NAv4hvSDeUvYOupOQr-21" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1030" y="130" as="sourcePoint" />
            <mxPoint x="1150" y="190" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1330" y="100" />
              <mxPoint x="1330" y="600" />
              <mxPoint x="1200" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0RprUW0VdY4Hi-o-dzBr-24" value="⑥ 其他controller从zookeeper中同步分区副本leader的信息，至此，broker首次启动完成" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f8cecc;strokeColor=none;" parent="s1NAv4hvSDeUvYOupOQr-1" vertex="1">
          <mxGeometry x="1210" y="290" width="380" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="X5HRNdtPY8fu5FD16kLa" name="Kafka-消费者组初始化流程">
    <mxGraphModel dx="2249" dy="822" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WSVmQIcftwqV6SyS_eED-0" />
        <mxCell id="WSVmQIcftwqV6SyS_eED-1" parent="WSVmQIcftwqV6SyS_eED-0" />
        <mxCell id="WSVmQIcftwqV6SyS_eED-44" value="④ leader制定消费者分区分配策略，发送给coordinator" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=none;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="610" y="490" width="210" height="55" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-43" value="③ coordinator随机选择一个consumer作为leader，并将所有consumer的信息发送给leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=none;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="610" y="410" width="210" height="55" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-42" value="② 每个consumer向coordinator发送加入consumer group的请求" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=none;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="617" y="360" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="40" y="110" width="560" height="630" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="60" y="200" width="510" height="130" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="60" y="380" width="510" height="130" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="60" y="570" width="510" height="130" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-6" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="850" y="210" width="170" height="530" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-7" value="consumer_0" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=none;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="860" y="240" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-8" value="&lt;span style=&quot;font-size: 14px;&quot;&gt;consumer_1&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=none;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="860" y="435" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-9" value="&lt;span style=&quot;font-size: 14px;&quot;&gt;consumer_2&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=none;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="860" y="650" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-10" value="consumer group" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="850" y="180" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-11" value="broker_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="80" y="170" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-12" value="broker_1&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22broker_0%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfontSize%3D14%3BfillColor%3D%23f5f5f5%3BstrokeColor%3Dnone%3BfontColor%3D%23333333%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%2280%22%20y%3D%22170%22%20width%3D%2270%22%20height%3D%2230%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="80" y="350" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-13" value="broker_2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="80" y="540" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-14" value="topic_A_partition_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="80" y="260" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-15" value="topic_A_partition_2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="80" y="630" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-16" value="topic_A_partition_1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="80" y="440" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-17" value="coordinator" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="360" y="260" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-18" value="coordinator" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="360" y="440" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-19" value="coordinator" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="360" y="630" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-22" value="系统主题：_consumer_offset，分区数：50" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="320" y="110" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-23" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="80" y="230" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-24" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="80" y="410" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-25" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="80" y="600" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-26" value="producer" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="-200" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-27" value="" style="endArrow=classic;html=1;fontSize=14;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" source="WSVmQIcftwqV6SyS_eED-26" target="WSVmQIcftwqV6SyS_eED-14">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-151" y="470" as="sourcePoint" />
            <mxPoint y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-28" value="" style="endArrow=classic;html=1;fontSize=14;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" source="WSVmQIcftwqV6SyS_eED-26" target="WSVmQIcftwqV6SyS_eED-16">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="490" as="sourcePoint" />
            <mxPoint x="90" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-29" value="" style="endArrow=classic;html=1;fontSize=14;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" source="WSVmQIcftwqV6SyS_eED-26" target="WSVmQIcftwqV6SyS_eED-15">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="500" as="sourcePoint" />
            <mxPoint x="90" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-30" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="360" y="410" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-31" value="" style="endArrow=classic;html=1;fontSize=14;entryX=1;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" source="WSVmQIcftwqV6SyS_eED-7" target="WSVmQIcftwqV6SyS_eED-18">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="770" y="300" as="sourcePoint" />
            <mxPoint x="820" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-32" value="" style="endArrow=classic;html=1;fontSize=14;entryX=1;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" source="WSVmQIcftwqV6SyS_eED-8" target="WSVmQIcftwqV6SyS_eED-18">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="860" y="343.75" as="sourcePoint" />
            <mxPoint x="540" y="576.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-33" value="" style="endArrow=classic;html=1;fontSize=14;entryX=1;entryY=0;entryDx=0;entryDy=0;exitX=0.007;exitY=0.6;exitDx=0;exitDy=0;exitPerimeter=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" source="WSVmQIcftwqV6SyS_eED-9" target="WSVmQIcftwqV6SyS_eED-18">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="860" y="600" as="sourcePoint" />
            <mxPoint x="540" y="612.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-34" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="870" y="405" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-35" value="" style="endArrow=classic;html=1;fontSize=14;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" source="WSVmQIcftwqV6SyS_eED-18" target="WSVmQIcftwqV6SyS_eED-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="630" y="370" as="sourcePoint" />
            <mxPoint x="770" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-36" value="" style="endArrow=classic;html=1;fontSize=14;exitX=0;exitY=0.75;exitDx=0;exitDy=0;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" source="WSVmQIcftwqV6SyS_eED-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="860" y="490" as="sourcePoint" />
            <mxPoint x="541" y="488" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-37" value="" style="endArrow=classic;html=1;fontSize=14;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeWidth=2;edgeStyle=orthogonalEdgeStyle;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" source="WSVmQIcftwqV6SyS_eED-18" target="WSVmQIcftwqV6SyS_eED-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="460" y="350" as="sourcePoint" />
            <mxPoint x="940" y="170" as="targetPoint" />
            <Array as="points">
              <mxPoint x="450" y="350" />
              <mxPoint x="730" y="350" />
              <mxPoint x="730" y="150" />
              <mxPoint x="935" y="150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-40" value="" style="endArrow=classic;html=1;fontSize=14;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeWidth=2;edgeStyle=orthogonalEdgeStyle;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" target="WSVmQIcftwqV6SyS_eED-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="450" y="440" as="sourcePoint" />
            <mxPoint x="935" y="240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="450" y="350" />
              <mxPoint x="730" y="350" />
              <mxPoint x="730" y="150" />
              <mxPoint x="935" y="150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-41" value="" style="endArrow=classic;html=1;fontSize=14;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeWidth=2;edgeStyle=orthogonalEdgeStyle;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="WSVmQIcftwqV6SyS_eED-1" target="WSVmQIcftwqV6SyS_eED-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="450" y="440" as="sourcePoint" />
            <mxPoint x="935" y="435" as="targetPoint" />
            <Array as="points">
              <mxPoint x="450" y="350" />
              <mxPoint x="730" y="350" />
              <mxPoint x="730" y="150" />
              <mxPoint x="935" y="150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-45" value="⑤ coordinator将leader制定的消费者分区分配策略分发给所有的consumer" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f8cecc;strokeColor=none;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="700" y="90" width="260" height="55" as="geometry" />
        </mxCell>
        <mxCell id="WSVmQIcftwqV6SyS_eED-46" value="① 确定coordinator节点：consumer group的hashcode对_consumer_offset主题的分区数求模，其结果对应的_consumer_offset的分区所在的broker节点上的coordinator成为leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f8cecc;strokeColor=none;" vertex="1" parent="WSVmQIcftwqV6SyS_eED-1">
          <mxGeometry x="160" y="145" width="440" height="55" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="64geiL93BIefN4hiFEeQ" name="kafka-消费者数据消费流程">
    <mxGraphModel dx="1422" dy="822" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="eXRcfnGxE2m_GOz2VhQj-0" />
        <mxCell id="eXRcfnGxE2m_GOz2VhQj-1" parent="eXRcfnGxE2m_GOz2VhQj-0" />
        <mxCell id="96_9g44DiSqEMU2bY9t--0" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="40" y="160" width="270" height="580" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="60" y="200" width="230" height="130" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="60" y="380" width="230" height="130" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="60" y="570" width="230" height="130" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--4" value="broker_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="80" y="170" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--5" value="broker_1&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22broker_0%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfontSize%3D14%3BfillColor%3D%23f5f5f5%3BstrokeColor%3Dnone%3BfontColor%3D%23333333%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%2280%22%20y%3D%22170%22%20width%3D%2270%22%20height%3D%2230%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="80" y="350" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--6" value="broker_2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="80" y="540" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--7" value="topic_A_partition_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="80" y="260" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--8" value="topic_A_partition_2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="80" y="630" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--9" value="topic_A_partition_1" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="80" y="440" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--14" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="80" y="230" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--15" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="80" y="410" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="96_9g44DiSqEMU2bY9t--16" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="80" y="600" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-0" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="350" y="160" width="850" height="530" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="370" y="180" width="660" height="490" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-2" value="&lt;span style=&quot;font-size: 14px;&quot;&gt;consumer_1&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="1040" y="380" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-3" value="&lt;span style=&quot;font-size: 14px;&quot;&gt;consumer_2&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="1040" y="595" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-4" value="consumer group" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f8cecc;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="1080" y="160" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-5" value="leader" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="1050" y="350" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-7" value="consumer_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="465" y="180" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-8" value="ConsumerNetworkClient" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;fontSize=14;strokeColor=#d79b00;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="390" y="265" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-9" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;fontSize=14;strokeColor=#82b366;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="390" y="380" width="580" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-10" value="completedFetches (queue)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#f5f5f5;strokeColor=none;fontColor=#333333;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="390" y="380" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-12" value="completed Fetch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;fontSize=12;strokeColor=#9673a6;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="850" y="440" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-13" value="。。。" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;fontSize=14;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="550" y="440" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-14" value="completed Fetch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;fontSize=12;strokeColor=#9673a6;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="430" y="440" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-15" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=12;fontColor=#FFFFFF;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="eXRcfnGxE2m_GOz2VhQj-1" source="KMG-bcqqbCsNOwnD4uls-7" target="KMG-bcqqbCsNOwnD4uls-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="450" y="30" as="sourcePoint" />
            <mxPoint x="645" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-17" value="调用sendFetches()方法，发送消息消费请求&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontSize=12;fontColor=#333333;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="640" y="210" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-18" value="消费者根据当前消费者配置参数，创建网络客户端，用于连接Kafka集群，进行数据消费。&lt;br&gt;相关参数有：&lt;br&gt;fetch,min.bytes：每批次最小抓取数据量，默认值：1 byte&lt;br&gt;fetch.max.wait.ms：每批次数据攒批等待时长，默认值500 ms&lt;br&gt;fetch.max.bytes：每批次最大抓取数据量，默认值：50 M" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontSize=12;fontColor=#333333;strokeColor=none;align=left;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="640" y="250" width="340" height="90" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-19" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=12;fontColor=#FFFFFF;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="eXRcfnGxE2m_GOz2VhQj-1" source="KMG-bcqqbCsNOwnD4uls-8" target="96_9g44DiSqEMU2bY9t--7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="505" y="160" as="sourcePoint" />
            <mxPoint x="555" y="110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-20" value="send()" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="290" y="250" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-21" value="completed Fetch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;fontSize=12;strokeColor=#9673a6;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="725" y="440" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-22" value="completed Fetch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;fontSize=12;strokeColor=#9673a6;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="610" y="440" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-23" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=12;fontColor=#FFFFFF;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="eXRcfnGxE2m_GOz2VhQj-1" source="96_9g44DiSqEMU2bY9t--7" target="KMG-bcqqbCsNOwnD4uls-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="320" y="80" as="sourcePoint" />
            <mxPoint x="370" y="30" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-24" value="onSuccess()" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#ffe6cc;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="280" y="360" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-25" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=12;fontColor=#FFFFFF;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="509.5" y="480" as="sourcePoint" />
            <mxPoint x="510" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-26" value="反序列化器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;fontSize=13;align=center;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="450" y="520" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-27" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=12;fontColor=#FFFFFF;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="509.5" y="560" as="sourcePoint" />
            <mxPoint x="510" y="600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-29" value="拦截器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;fontSize=13;align=center;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="450" y="600" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-30" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=13;fontColor=#FFFFFF;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="570" y="619.5" as="sourcePoint" />
            <mxPoint x="630" y="619.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-33" value="处理好的数据" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;fontSize=13;align=center;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="630" y="600" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-34" value="消费者从completedFetches中拉取数据&lt;br&gt;相关配置参数：&lt;br&gt;max.poll.records：消费者从队列里一次拉取数据的最大条数，默认值：500" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;fontSize=13;align=left;strokeColor=#b85450;verticalAlign=bottom;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="580" y="490" width="310" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KMG-bcqqbCsNOwnD4uls-35" value="consumer_0" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#d5e8d4;strokeColor=none;" vertex="1" parent="eXRcfnGxE2m_GOz2VhQj-1">
          <mxGeometry x="590" y="490" width="90" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Cp1JevXsEfihmJPiNBhv" name="Hive-架构">
    <mxGraphModel dx="591" dy="828" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-6" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1260" y="20" width="1040" height="670" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-7" value="RDBMS" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1297" y="60" width="120" height="590" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-8" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1730" y="60" width="480" height="460" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-9" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1775" y="350" width="400" height="160" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-10" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="1700" y="530" width="550" height="120" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-12" value="Client" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1730" y="60" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-13" value="Driver" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="2115" y="350" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-14" value="Hadoop" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1700" y="530" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-15" value="CLI" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2035" y="90" width="140" height="220" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-16" value="Driver" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="2095" y="262.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-17" value="JDBC/ODBC" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1800" y="90" width="120" height="64.5" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-18" value="Driver" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1856" y="120" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-20" value="hiveserver2" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="1796" y="220" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-21" value="解析器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1835" y="360" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-22" value="编译器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1995" y="360" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-23" value="优化器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1995" y="460" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-24" value="执行器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1835" y="460" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-25" value="HDFS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1760" y="600" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-26" value="YARN" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1930" y="600" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-27" value="MapReduce" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="2090" y="600" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-28" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="MMLF9rOsWS1lcQj2fBCx-13" target="MMLF9rOsWS1lcQj2fBCx-16" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1790" y="350" as="sourcePoint" />
            <mxPoint x="1840" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-29" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="MMLF9rOsWS1lcQj2fBCx-13" target="MMLF9rOsWS1lcQj2fBCx-18" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2040" y="313" as="sourcePoint" />
            <mxPoint x="2120" y="228" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-30" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="MMLF9rOsWS1lcQj2fBCx-22" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1930" y="380" as="sourcePoint" />
            <mxPoint x="1980" y="330" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-31" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="MMLF9rOsWS1lcQj2fBCx-22" target="MMLF9rOsWS1lcQj2fBCx-23" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2050" y="410" as="sourcePoint" />
            <mxPoint x="2040" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-33" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="MMLF9rOsWS1lcQj2fBCx-24" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1995" y="479.5" as="sourcePoint" />
            <mxPoint x="1943" y="479.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-34" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="MMLF9rOsWS1lcQj2fBCx-20" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1856" y="154.5" as="sourcePoint" />
            <mxPoint x="1856" y="184.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-35" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1856" y="310" as="sourcePoint" />
            <mxPoint x="1856" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-36" value="metastore：&lt;br&gt;独立运行模式" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=default;" parent="1" vertex="1">
          <mxGeometry x="1520" y="310" width="130" height="65" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-38" value="metastore：&lt;br&gt;嵌入式运行" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="2060" y="173" width="90" height="47" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-40" value="metastore：&lt;br&gt;嵌入式运行" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1819" y="254" width="90" height="47" as="geometry" />
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-41" value="" style="endArrow=classic;html=1;rounded=0;entryX=1.015;entryY=0.631;entryDx=0;entryDy=0;entryPerimeter=0;edgeStyle=orthogonalEdgeStyle;" parent="1" target="MMLF9rOsWS1lcQj2fBCx-36" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730" y="70" as="sourcePoint" />
            <mxPoint x="1630" y="210" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1730" y="71" />
              <mxPoint x="1700" y="71" />
              <mxPoint x="1700" y="351" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-42" value="" style="endArrow=classic;html=1;rounded=0;dashed=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1819" y="277" as="sourcePoint" />
            <mxPoint x="1420" y="277" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-43" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.615;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="MMLF9rOsWS1lcQj2fBCx-36" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1510" y="350" as="sourcePoint" />
            <mxPoint x="1420" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MMLF9rOsWS1lcQj2fBCx-44" value="" style="endArrow=classic;html=1;rounded=0;dashed=1;fillColor=#f8cecc;strokeColor=#b85450;entryX=0.975;entryY=0.236;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="MMLF9rOsWS1lcQj2fBCx-7" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2060" y="199.5" as="sourcePoint" />
            <mxPoint x="1661" y="199.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
